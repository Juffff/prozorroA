{"version":3,"sources":["../../../server/utils/dbUtils.js"],"names":["connect","createTender","Tender","mongoose","model","db","config","host","port","name","tender","find","_id","then","data","length","newTender","startDate","awardCriteria","tenderers","items","classification_ids","tenderID","title","amount","currency","valueAddedTaxIncluded","save","err","doc","console","log"],"mappings":";;;;;QAQgBA,O,GAAAA,O;QAKAC,Y,GAAAA,Y;;AAbhB;;;;AACA;;;;AACA;;AACA;;;;;;AAEA,IAAMC,SAASC,mBAASC,KAAT,CAAe,QAAf,CAAf;;AAGO,SAASJ,OAAT,GAAmB;AACtB,QAAMK,KAAKC,iBAAOD,EAAlB;AACAF,uBAASH,OAAT,gBAA8BK,GAAGE,IAAjC,SAAyCF,GAAGG,IAA5C,SAAoDH,GAAGI,IAAvD;AACH;;AAEM,SAASR,YAAT,CAAsBS,MAAtB,EAA8B;AACjCR,WAAOS,IAAP,CAAY,EAACC,KAAKF,OAAOE,GAAb,EAAZ,EAA+BC,IAA/B,CAAoC,gBAAQ;AACxC,YAAGC,KAAKC,MAAL,KAAgB,CAAnB,EAAqB;AAChB,gBAAMC,YAAY,IAAId,MAAJ,EAAlB;AACAc,sBAAUJ,GAAV,GAAgBF,OAAOE,GAAvB;AACAI,sBAAUP,IAAV,GAAiBC,OAAOD,IAAxB;AACAO,sBAAUC,SAAV,GAAsBP,OAAOO,SAA7B;AACAD,sBAAUE,aAAV,GAA0BR,OAAOQ,aAAjC;AACAF,sBAAUG,SAAV,GAAsBT,OAAOS,SAA7B;AACAH,sBAAUI,KAAV,GAAkBV,OAAOU,KAAzB;AACAJ,sBAAUK,kBAAV,GAA+BX,OAAOW,kBAAtC;AACAL,sBAAUM,QAAV,GAAqBZ,OAAOY,QAA5B;AACAN,sBAAUO,KAAV,GAAkBb,OAAOa,KAAzB;AACAP,sBAAUQ,MAAV,GAAmBd,OAAOc,MAA1B;AACAR,sBAAUS,QAAV,GAAqBf,OAAOe,QAA5B;AACAT,sBAAUU,qBAAV,GAAkChB,OAAOgB,qBAAzC;AACAV,sBAAUW,IAAV,CAAe,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC/B,oBAAGD,GAAH,EAAO;AACF,gDAAaA,GAAb;AACJ,iBAFD,MAEO;AACHE,4BAAQC,GAAR,CAAYF,GAAZ;AACH;AACJ,aAND;AAOJ;AACJ,KAvBD;AAwBH","file":"dbUtils.js","sourcesContent":["import mongoose from 'mongoose';\nimport config from '../config/config.js';\nimport '../models/Tender';\nimport errorhandler from '../errorHandler';\n\nconst Tender = mongoose.model('Tender');\n\n\nexport function connect() {\n    const db = config.db;\n    mongoose.connect(`mongodb://${db.host}:${db.port}/${db.name}`);\n}\n\nexport function createTender(tender) {\n    Tender.find({_id: tender._id}).then(data => {\n        if(data.length === 0){\n             const newTender = new Tender;\n             newTender._id = tender._id;\n             newTender.name = tender.name;\n             newTender.startDate = tender.startDate;\n             newTender.awardCriteria = tender.awardCriteria;\n             newTender.tenderers = tender.tenderers;\n             newTender.items = tender.items;\n             newTender.classification_ids = tender.classification_ids;\n             newTender.tenderID = tender.tenderID;\n             newTender.title = tender.title;\n             newTender.amount = tender.amount;\n             newTender.currency = tender.currency;\n             newTender.valueAddedTaxIncluded = tender.valueAddedTaxIncluded;\n             newTender.save(function (err, doc) {\n                 if(err){\n                      errorhandler(err);\n                 } else {\n                     console.log(doc);\n                 }\n             });\n        }\n    });\n}"]}