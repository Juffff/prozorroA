{"version":3,"sources":["../../../build/client/script.js"],"names":["window","onload","searchButton","document","getElementById","searchInput","clearSearchInput","amountTh","pDate","$","click","e","attr","Date","toLocaleDateString","toLocaleTimeString","encodeURIComponent","html","addEventListener","event","preventDefault","keyCode","onclick","innerHTML","listReq","value","sortByAmount","sortByDatePublished","search","sort","server","fetch","then","response","json","tBody","forEach","Object","values","el","join","toLowerCase","indexOf","createTr","catch","console","log","data","dataToBeSorted","map","datePublished","undefined","a","b","data1","data2","Number","parseInt","amount","createTd","className","link","cssText","createElement","classList","add","openInNewTab","style","ondblclick","createUlTD","Array","isArray","td","ul","li","appendChild","setColorOfTr","status","tr","tenderID","name","toString","replace","title","startDate","tenderers","suppliers","currency","items","classification_ids","historyList","keys","history","statueEnum","url","win","open","focus"],"mappings":"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","file":"script.js","sourcesContent":["window.onload = () => {\n\n    const searchButton = document.getElementById('searchButton');\n    const searchInput = document.getElementById('searchInput');\n    const clearSearchInput = document.getElementById('clearSearchButton');\n    const amountTh = document.getElementById('amountTh');\n    const pDate = document.getElementById('pDate');\n\n    $(\"#btnExport\").click(function (e) {\n        $(this).attr({\n            'download': `ProzorroAnalytics_${new Date().toLocaleDateString()}_${new Date().toLocaleTimeString()}.xls`,\n            'href': 'data:application/csv;charset=utf-8,' + encodeURIComponent($('#dvData').html())\n        })\n    });\n\n    searchInput.addEventListener(\"keyup\", function (event) {\n        event.preventDefault();\n        if (event.keyCode === 13) {\n            searchButton.click();\n        }\n    });\n\n    searchButton.onclick = function () {\n        document.getElementById('tBody').innerHTML = '';\n        listReq(searchInput.value, sortByAmount);\n    };\n\n    amountTh.addEventListener('click', function(){\n        document.getElementById('tBody').innerHTML = '';\n        listReq(searchInput.value, sortByAmount);\n    });\n\n    pDate.addEventListener('click', function(){\n        document.getElementById('tBody').innerHTML = '';\n        listReq(searchInput.value, sortByDatePublished);\n    });\n\n    clearSearchInput.onclick = function () {\n        searchInput.value = '';\n        document.getElementById('tBody').innerHTML = '';\n        listReq('', sortByAmount);\n    };\n\n    function listReq(search, sort) {\n       // const server = 'http://localhost:8080/tenders';\n        const server = 'https://prozorroanalytics.herokuapp.com/tenders';\n        fetch(server)\n            .then(response => response.json())\n            .then(json => {\n                if (typeof sort === 'function') {\n                    return sort(json);\n                } else return sortByAmount(json);\n            })\n            .then(json => {\n                    const tBody = document.getElementById('tBody');\n                    json.forEach(el => {\n                        if (Object.values(el).join('').toLowerCase().indexOf(search.toLowerCase()) !== -1) {\n                            createTr(el, tBody);\n                        }\n                    });\n                }\n            )\n            .catch(console.log);\n    }\n\n    function sortByDatePublished(data) {\n        const dataToBeSorted = data.map(el => {\n            if (el.datePublished === undefined) {\n                el.datePublished = null;\n                return el;\n            } else return el;\n        });\n        return dataToBeSorted.sort((a, b) => {\n            let data1 = new Date(a.datePublished);\n            let data2 = new Date(b.datePublished);\n            if (data1 < data2) {\n                return 1;\n            }\n            if (data1 > data2) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n\n    function sortByAmount(data) {\n        const dataToBeSorted = data;\n        return dataToBeSorted.sort((a, b) => {\n            const data1 = Number.parseInt(a.amount);\n            const data2 = Number.parseInt(b.amount);\n            if (data1 < data2) {\n                return 1;\n            }\n            if (data1 > data2) {\n                return -1;\n            }\n            return 0;\n        });\n    }\n\n\n\n\n    const createTd = (data, className, link, cssText) => {\n        const el = document.createElement('td');\n        if (className) {\n            el.classList.add(className);\n        }\n        if (link) {\n            el.addEventListener('click', () => openInNewTab(link));\n        }\n        if (cssText) {\n            el.style.cssText = cssText;\n        }\n        if (!data) el.innerHTML = ''; else el.innerHTML = data;\n        el.ondblclick = function () {\n            searchInput.value = el.innerHTML;\n            document.getElementById('tBody').innerHTML = '';\n            listReq(searchInput.value);\n        };\n        return el;\n    };\n\n    const createUlTD = (data, cssText) => {\n        if (Array.isArray(data)) {\n            const td = document.createElement('td');\n            td.style.cssText = cssText;\n            const ul = document.createElement('ul');\n            data.forEach(el => {\n                const li = document.createElement('li');\n                li.innerHTML = el;\n                li.ondblclick = function () {\n                    searchInput.value = li.innerHTML;\n                    document.getElementById('tBody').innerHTML = '';\n                    listReq(searchInput.value);\n                };\n                ul.appendChild(li);\n            });\n            td.appendChild(ul);\n            return td;\n        } else return createTd(data, false, false, `background-color: ${setColorOfTr(data.status)}`);\n\n    };\n\n    const createTr = (data, tBody) => {\n        const tr = document.createElement('tr');\n        let className = 'default';\n        tr.classList.add(className);\n        tr.appendChild(createTd(data.tenderID, 'href', `https://prozorro.gov.ua/tender/${data.tenderID}`, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createTd(data.name, false, false, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createTd(Number.parseInt(data.amount, 0).toString().replace(/(\\d{1,3})(?=((\\d{3})*([^\\d]|$)))/g, \" $1 \").replace('.', ',').replace(' ,', ',').replace(', ', ','), false, false, `text-align: end; background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createTd(data.title, false, false, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createTd(data.status, false, false, `background-color: ${setColorOfTr(data.status)}`));\n        if (data.datePublished) {\n            tr.appendChild(createTd(new Date(data.datePublished).toLocaleDateString(), false, false, `text-align: center; background-color: ${setColorOfTr(data.status)}`));\n        } else {\n            tr.appendChild(createTd('', false, false, `background-color: ${setColorOfTr(data.status)}`));\n        }\n        if (data.startDate) {\n            tr.appendChild(createTd(new Date(data.startDate).toLocaleDateString(), false, false, `background-color: ${setColorOfTr(data.status)}`));\n        } else {\n            tr.appendChild(createTd('', false, false, `background-color: ${setColorOfTr(data.status)}`));\n        }\n        tr.appendChild(createUlTD(data.tenderers, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createUlTD(data.suppliers, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createTd(data.currency, false, false, `text-align: center; background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createUlTD(data.items, `background-color: ${setColorOfTr(data.status)}`));\n        tr.appendChild(createUlTD(data.classification_ids, `background-color: ${setColorOfTr(data.status)}`));\n        const historyList = Object.keys(data.history).map(el => {\n            if(typeof data.history[el] === 'object'){\n                return`${el} : ${Object.values(data.history[el])}`\n            } else return `${el} : ${data.history[el]}`;\n        });\n        tr.appendChild(createUlTD(historyList, `background-color: ${setColorOfTr(data.status)}`));\n        tBody.appendChild(tr);\n    };\n\n};\n\nfunction setColorOfTr(status) {\n    let statueEnum = {\n        'Переговоры': 'lightgreen',\n        'Период уточнений': 'lightgreen',\n        'Ожидание предложений': 'lightgreen',\n        'Период аукциона': 'lightcyan',\n        'Квалификация победителя': 'lightcyan',\n        'Квалификация/Переквалификация': 'lightcyan',\n        'Преквалификация/Период оспариваний': 'lightcyan',\n        'Предложения рассмотрены': 'greenyellow',\n        'Закупка не состоялась': 'lightpink',\n        'Закупка закончена': 'lightgrey',\n        'Закупка отменена': 'lightpink'\n    };\n    return statueEnum[status];\n}\n\nfunction openInNewTab(url) {\n    const win = window.open(url, '_blank');\n    win.focus();\n}\n"]}