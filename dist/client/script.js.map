{"version":3,"sources":["../../client/script.js"],"names":["window","onload","searchButton","document","getElementById","searchInput","onclick","innerHTML","server","fetch","then","response","json","tBody","forEach","Object","values","el","join","toLowerCase","indexOf","value","createTr","catch","console","log","createTd","data","className","link","createElement","classList","add","addEventListener","openInNewTab","createUlTD","Array","isArray","td","ul","li","appendChild","tr","style","cssText","setColorOfTr","status","tenderID","name","numeral","amount","format","title","datePublished","Date","toLocaleDateString","startDate","tenderers","suppliers","currency","valueAddedTaxIncluded","items","classification_ids","statueEnum","url","win","open","focus"],"mappings":"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","file":"script.js","sourcesContent":["window.onload = () => {\n\n    const searchButton = document.getElementById('searchButton');\n    const searchInput = document.getElementById('searchInput');\n\n    searchButton.onclick = function () {\n        document.getElementById('tBody').innerHTML = '';\n        const server = 'http://localhost:8080/';\n        fetch(server)\n            .then(response => response.json())\n            .then(json => {\n                    const tBody = document.getElementById('tBody');\n                    json.forEach(el => {\n                        if (Object.values(el).join('').toLowerCase().indexOf(searchInput.value.toLowerCase()) !== -1) {\n                            createTr(el, tBody);\n                        }\n                    });\n                }\n            )\n            .catch(console.log);\n    };\n\n    const createTd = (data, className, link) => {\n        const el = document.createElement('td');\n        if (className) {\n            el.classList.add(className);\n        }\n        if (link) {\n            el.addEventListener('click', () => openInNewTab(link));\n        }\n        if (!data) el.innerHTML = ''; else el.innerHTML = data;\n        return el;\n    };\n\n    const createUlTD = (data) => {\n        if(Array.isArray(data)){\n            const td = document.createElement('td');\n            const ul = document.createElement('ul');\n            data.forEach(el => {\n                const li = document.createElement('li');\n                li.innerHTML = el;\n                ul.appendChild(li);\n            });\n            td.appendChild(ul);\n            return td;\n        } else return createTd(data);\n\n    };\n\n    const createTr = (data, tBody) => {\n        const tr = document.createElement('tr');\n        tr.style.cssText = `background-color: ${setColorOfTr(data.status)}`;\n        let className = 'default';\n        tr.classList.add(className);\n        tr.appendChild(createTd(data.tenderID, 'href', `https://prozorro.gov.ua/tender/${data.tenderID}`));\n        tr.appendChild(createTd(data.name));\n        tr.appendChild(createTd(numeral(data.amount).format('0,0.00')));\n        tr.appendChild(createTd(data.title));\n        tr.appendChild(createTd(data.status));\n        if (data.datePublished) {\n            tr.appendChild(createTd(new Date(data.datePublished).toLocaleDateString()));\n        } else {\n            tr.appendChild(createTd(''));\n        }\n        if (data.startDate) {\n            tr.appendChild(createTd(new Date(data.startDate).toLocaleDateString()));\n        } else {\n            tr.appendChild(createTd(''));\n        }\n        tr.appendChild(createUlTD(data.tenderers));\n        tr.appendChild(createUlTD(data.suppliers));\n        tr.appendChild(createTd(data.currency));\n        tr.appendChild(createTd(data.valueAddedTaxIncluded ? 'С НДС' : 'Без НДС'));\n        tr.appendChild(createUlTD(data.items));\n        tr.appendChild(createUlTD(data.classification_ids));\n        tBody.appendChild(tr);\n    };\n\n};\n\nfunction setColorOfTr(status) {\n    let statueEnum = {\n        'Переговоры': 'lightgreen',\n        'Период уточнений': 'lightgreen',\n        'Ожидание предложений': 'lightgreen',\n        'Период аукциона': 'lightcyan',\n        'Квалификация победителя': 'lightcyan',\n        'Квалификация/Переквалификация': 'lightcyan',\n        'Преквалификация/Период оспариваний': 'lightcyan',\n        'Предложения рассмотрены': 'greenyellow',\n        'Закупка не произошла': 'lightpink',\n        'Закупка закончена': 'lightgrey',\n        'Закупка отменена': 'lightpink'\n    };\n    return statueEnum[status];\n}\n\nfunction openInNewTab(url) {\n    const win = window.open(url, '_blank');\n    win.focus();\n}"]}