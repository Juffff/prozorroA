{"version":3,"sources":["../../client/script.js"],"names":["window","onload","searchButton","document","getElementById","searchInput","clearSearchInput","onclick","innerHTML","listReq","value","search","server","fetch","then","response","json","tBody","forEach","Object","values","el","join","toLowerCase","indexOf","createTr","catch","console","log","createTd","data","className","link","createElement","classList","add","addEventListener","openInNewTab","ondblclick","createUlTD","Array","isArray","td","ul","li","appendChild","tr","style","cssText","setColorOfTr","status","tenderID","name","numeral","amount","format","title","datePublished","Date","toLocaleDateString","startDate","tenderers","suppliers","currency","valueAddedTaxIncluded","items","classification_ids","statueEnum","url","win","open","focus"],"mappings":"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","file":"script.js","sourcesContent":["window.onload = () => {\n\n    const searchButton = document.getElementById('searchButton');\n    const searchInput = document.getElementById('searchInput');\n    const clearSearchInput = document.getElementById('clearSearchButton');\n\n    searchButton.onclick = function () {\n        document.getElementById('tBody').innerHTML = '';\n        listReq(searchInput.value);\n    };\n\n    clearSearchInput.onclick = function () {\n        searchInput.value = '';\n        document.getElementById('tBody').innerHTML = '';\n        listReq('');\n    };\n\n    function listReq(search) {\n        const server = 'http://localhost:8080/';\n        fetch(server)\n            .then(response => response.json())\n            .then(json => {\n                    const tBody = document.getElementById('tBody');\n                    json.forEach(el => {\n                        if (Object.values(el).join('').toLowerCase().indexOf(search.toLowerCase()) !== -1) {\n                            createTr(el, tBody);\n                        }\n                    });\n                }\n            )\n            .catch(console.log);\n    }\n\n\n    const createTd = (data, className, link) => {\n        const el = document.createElement('td');\n        if (className) {\n            el.classList.add(className);\n        }\n        if (link) {\n            el.addEventListener('click', () => openInNewTab(link));\n        }\n        if (!data) el.innerHTML = ''; else el.innerHTML = data;\n        el.ondblclick = function () {\n            searchInput.value = el.innerHTML;\n            document.getElementById('tBody').innerHTML = '';\n            listReq(searchInput.value);\n        };\n        return el;\n    };\n\n    const createUlTD = (data) => {\n        if (Array.isArray(data)) {\n            const td = document.createElement('td');\n            const ul = document.createElement('ul');\n            data.forEach(el => {\n                const li = document.createElement('li');\n                li.innerHTML = el;\n                li.ondblclick = function () {\n                    searchInput.value = li.innerHTML;\n                    document.getElementById('tBody').innerHTML = '';\n                    listReq(searchInput.value);\n                };\n                ul.appendChild(li);\n            });\n            td.appendChild(ul);\n            return td;\n        } else return createTd(data);\n\n    };\n\n    const createTr = (data, tBody) => {\n        const tr = document.createElement('tr');\n        tr.style.cssText = `background-color: ${setColorOfTr(data.status)}`;\n        let className = 'default';\n        tr.classList.add(className);\n        tr.appendChild(createTd(data.tenderID, 'href', `https://prozorro.gov.ua/tender/${data.tenderID}`));\n        tr.appendChild(createTd(data.name));\n        tr.appendChild(createTd(numeral(data.amount).format('0,0.00')));\n        tr.appendChild(createTd(data.title));\n        tr.appendChild(createTd(data.status));\n        if (data.datePublished) {\n            tr.appendChild(createTd(new Date(data.datePublished).toLocaleDateString()));\n        } else {\n            tr.appendChild(createTd(''));\n        }\n        if (data.startDate) {\n            tr.appendChild(createTd(new Date(data.startDate).toLocaleDateString()));\n        } else {\n            tr.appendChild(createTd(''));\n        }\n        tr.appendChild(createUlTD(data.tenderers));\n        tr.appendChild(createUlTD(data.suppliers));\n        tr.appendChild(createTd(data.currency));\n        tr.appendChild(createTd(data.valueAddedTaxIncluded ? 'С НДС' : 'Без НДС'));\n        tr.appendChild(createUlTD(data.items));\n        tr.appendChild(createUlTD(data.classification_ids));\n        tBody.appendChild(tr);\n    };\n\n};\n\nfunction setColorOfTr(status) {\n    let statueEnum = {\n        'Переговоры': 'lightgreen',\n        'Период уточнений': 'lightgreen',\n        'Ожидание предложений': 'lightgreen',\n        'Период аукциона': 'lightcyan',\n        'Квалификация победителя': 'lightcyan',\n        'Квалификация/Переквалификация': 'lightcyan',\n        'Преквалификация/Период оспариваний': 'lightcyan',\n        'Предложения рассмотрены': 'greenyellow',\n        'Закупка не произошла': 'lightpink',\n        'Закупка закончена': 'lightgrey',\n        'Закупка отменена': 'lightpink'\n    };\n    return statueEnum[status];\n}\n\nfunction openInNewTab(url) {\n    const win = window.open(url, '_blank');\n    win.focus();\n}"]}